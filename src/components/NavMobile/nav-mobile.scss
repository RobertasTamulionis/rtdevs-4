:root {
  --glass: rgba(18, 22, 24, 0.55);
  --ink: #e8ecec;
  --peach: #f2b7a3;
  --sa-top: env(safe-area-inset-top, 0px);
  --sa-bottom: env(safe-area-inset-bottom, 0px);
  --shadow-1: 0 12px 32px rgba(0,0,0,.35);
  --shadow-2: inset 0 1px 0 rgba(255,255,255,.06), inset 0 -1px 0 rgba(0,0,0,.3);
}

.nav-mobile {
  position: relative;
  grid-column: 1 / -1;
  grid-row: 1 / 2;

  @include respond("lgmd") {
    display: none;
  }
  
  &__nav-wrapper{
    position: absolute;
    right: 20px;
    top: 10px;
    width: 80px;
    height: 80px;
    border-radius: 20px;
    background-color: rgba(22,28,29,0.2);
    box-shadow: 6px 6px 16px rgba(0,0,0,0.6), -6px -6px 16px rgba(22,28,29,0.05);
    z-index: 105;
  }

  &__toggle-btn{
    position: absolute;
    top: 24px;
    right: 24px;
    width: 32px;
    height: 32px;
    cursor: pointer;
    border: 0;
    background: transparent;
    -webkit-tap-highlight-color: transparent;

    span{
      position: absolute;
      left: 50%;
      top: 50%;
      width: 100%;
      height: 2px;
      background: var(--orange);
      border-radius: 999;
      transform-origin: 50% 50%;

      &:nth-of-type(1){
        transform: translate(-50%, -50%) translateY(-8px) rotate(0deg);
      }
      &:nth-of-type(2){
        transform: translate(-50%, -50%) rotate(0deg) scaleX(1);
        opacity: 1;
      }
      &:nth-of-type(3){
        transform: translate(-50%, calc(-50% + 8px)) rotate(0deg);
      }
    }
  }

  /* LIST */
  &__nav-list {
    position: absolute;
    left: 20px;
    right: 20px;
    top: calc(84px + var(--sa-top));
    bottom: calc(20px + var(--sa-bottom));
    display: grid;
    gap: 14px;
    padding: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    visibility: hidden;
    pointer-events: none;
    opacity: 0;

    /* subtle ambient background (optional) */
    // background:
    //   radial-gradient(900px 600px at 20% 0%, rgba(255,200,170,.05), transparent 60%),
    //   radial-gradient(900px 600px at 80% 100%, rgba(255,200,170,.03), transparent 60%);
    border-radius: 16px; /* purely visual; no clipping */
    pointer-events: auto;
  }

  /* ITEM BUTTON */
  &__link-wrapper > button {
    -webkit-tap-highlight-color: transparent;
    appearance: none;
    width: 100%;
    display: grid;
    /* tighter grid for very small devices */
    grid-template-columns: 36px 1fr 18px; /* dot | label | chevron */
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,.06);
    background:
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)),
      var(--glass);
    box-shadow: var(--shadow-1), var(--shadow-2);
    color: var(--ink);
    text-align: left;

    font-size: 17px;      /* iOS-friendly base (avoids auto-zoom) */
    line-height: 1.25;
    letter-spacing: .2px;
    position: relative;
    transition: transform .18s ease, border-color .2s ease, background .2s ease;

    &:active { transform: translateY(1px) scale(.985); }

    /* left glow “dot” */
    &::before {
      content: "";
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: rgba(0,0,0,.35);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.06),
        0 6px 16px rgba(0,0,0,.5);
      grid-column: 1 / 2;
    }

    /* right chevron */
    &::after {
      content: "›";
      grid-column: 3 / 4;
      justify-self: end;
      font-size: 20px;
      opacity: .6;
      transform: translateX(0);
      transition: transform .2s ease, opacity .2s ease;
    }

    @media (hover: hover) and (pointer: fine) {
      &:hover { border-color: rgba(255,255,255,.14); }
      &:hover::after { transform: translateX(2px); opacity: .9; }
    }
  }

  @media (min-width: 360px) {
    &__nav-list { top: calc(100px + var(--sa-top)); }
    &__link-wrapper > button {
      grid-template-columns: 44px 1fr 22px;
      gap: 14px;
      padding: 14px 16px;
      border-radius: 20px;
      font-size: 18px;
      &::before { width: 36px; height: 36px; }
      &::after  { font-size: 22px; }
    }
  }

  &__link-wrapper.is-active > button {
    background:
      linear-gradient(180deg, rgba(242,183,163,.12), rgba(242,183,163,.04)),
      var(--glass);
    border-color: rgba(242,183,163,.35);
    color: var(--peach);
    box-shadow:
      0 8px 22px rgba(242,183,163,.10),
      var(--shadow-1),
      var(--shadow-2);

    &::before {
      box-shadow:
        0 0 16px rgba(242,183,163,.45),
        inset 0 0 0 1px rgba(255,255,255,.08),
        0 6px 16px rgba(0,0,0,.5);
      background:
        radial-gradient(60% 60% at 50% 50%, rgba(242,183,163,.14), rgba(242,183,163,0) 70%),
        rgba(0,0,0,.35);
    }
  }

  /* REDUCED MOTION */
  @media (prefers-reduced-motion: reduce) {
    &__nav-list, &__nav-list * { transition: none !important; animation: none !important; }
  }
}